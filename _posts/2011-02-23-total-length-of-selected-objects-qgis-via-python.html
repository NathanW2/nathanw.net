---
layout: post
title: Getting total length of selected lines in QGIS via python
tags:
- gis
- mapping
- Open Source
- python
- qgis
- Quantum GIS
- shapely
status: publish
type: post
published: true
meta:
  superawesome: 'false'
  _edit_last: '4008903'
  jabber_published: '1298448837'
  _wpas_done_twitter: '1'
  email_notification: '1298448838'
  _wpas_mess: ! 'update - Getting total length of selected lines in QGIS via python:'
  reddit: a:2:{s:5:"count";s:1:"0";s:4:"time";s:10:"1335518763";}
---
The other day I was trying to get the total length of the some selected lines in QGIS.  In MapInfo I would just do
<blockquote>Select Sum(ObjectLen(obj,"m")) from Selection</blockquote>
however QGIS doesn't have the ability (yet..) to run SQL queries like this, but you can do it via python.

The following is a little python snippet that will get the total length of the selected objects. <em>(You will need to have shapely installed to use)</em>

[sourcecode language="python"]
from shapely.wkb import loads
def getLength():
    layer = qgis.utils.iface.mapCanvas().currentLayer()
    total = 0
    for feature in layer.selectedFeatures():
        geom = feature.geometry()
        wkb = geom.asWkb()
        line = loads(wkb)
        total = total + line.length
    return total

print getLength()
[/sourcecode]

<em><strong>EDIT:Or as Peter asked in the comments, yes you can just call length on the geometry:</strong></em>

[sourcecode language="python"]
def getLength():
    layer = qgis.utils.iface.mapCanvas().currentLayer()
    total = 0
    for feature in layer.selectedFeatures():
        geom = feature.geometry()
        total = total + geom.length()
    return total

print getLength()
[/sourcecode]

Just copy and past that into your QGIS python console and call <em>getLength()</em> when ever you need the total length.

<em>Note: I have found the <em>QgsGeometry .</em>legnth() function to be unstable in the past and it has crashed my QGIS instance. Just test it first, if not you can always use the shapely method.</em>
